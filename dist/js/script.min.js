let pokemonRepository=(function(){let pokemonList=[];let apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=150';function add(pokemon){pokemonList.push(pokemon)}
function getAll(){return pokemonList}
function addListItem(pokemon){let pokemonListDisplay=$('.pokemon-list');let listItem=$('<li class="list-group-item d-block"></li>');let button=$('<button class="pokemon-button btn btn-outline-danger btn-block btn-lg text-uppercase" data-toggle="modal" data-target="#pokemon-modal">'+pokemon.name+'</button>');listItem.append(button);pokemonListDisplay.append(listItem);button.on('click',function(){$('#pokemon-name').remove();$('#pokemon-height').remove();$('#pokemon-image').remove();showDetails(pokemon)})}
function showDetails(pokemon){loadDetails(pokemon).then(function(){let modalHeader=$('.modal-header');let pokemonNameTitle=$('<h5 id="pokemon-name">'+pokemon.name.toUpperCase()+'</h5>');modalHeader.prepend(pokemonNameTitle);let displayHeight=$('<p id="pokemon-height">Height: '+pokemon.height+'</p>');let displayImage=$('<img src="'+pokemon.imageUrl+'" id="pokemon-image" alt="Image of '+pokemon.name+'">');$('.modal-body').append(displayHeight).append(displayImage)})}
function loadList(){return fetch(apiUrl).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url,};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){let url=item.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){item.imageUrl=details.sprites.front_default;item.height=details.height;item.types=details.types}).catch(function(e){console.error(e)})}
function searchPokemon(searchInput){$('.pokemon-list').empty();pokemonList.forEach((pokemon)=>{if(pokemon.name.toLowerCase().includes(searchInput.toLowerCase())){addListItem(pokemon)}})}
function lowerHomePage(){let homePage=$('.home-page-body');homePage.toggleClass('nav-open')}
return{add:add,getAll:getAll,addListItem:addListItem,showDetails:showDetails,loadList:loadList,loadDetails:loadDetails,searchPokemon:searchPokemon,lowerHomePage:lowerHomePage}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})})